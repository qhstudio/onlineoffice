<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>文档上传</title>
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" href="../../css/bootstrap-theme.min.css" />
		<link rel="stylesheet" type="text/css" href="../../webuploader/webuploader.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css" />
		<link rel="stylesheet" type="text/css" href="../../css/upload.css" />
		<script src="../../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../../webuploader/webuploader.js"></script>
	</head>

	<body>
		<div class="container-fluid">
			<div class="row">
				<!-- top -->
				<div class="col-md-12">
					<div class="body-top">
						<p><a href="#">登录</a> <a href="#">注册</a></p>
					</div>
				</div>
			</div>
			<div class="row">
				<!-- search -->
				<div class="col-md-3"></div>
				<div class="col-md-9">
					<div class="search-form-box">
						<form action="">
							<div class="logo-box"></div>
							<div class="input-search-box">
								<input type="search" class="input-search-input" placeholder="请输入搜索的内容">
								<button type="submit" class="input-search-btn"><i class="glyphicon glyphicon-search"></i> 搜索</button>
							</div>
						</form>
					</div>
				</div>

			</div>
			<div class="row">
				<div class="search-nav">

					<a href="index.html">
						首页
					</a>
					<a href="docList.html">
						最新上传
					</a>
					<a href="docList.html">
						热门文档
					</a>
					<a href="docList.html">
						搜索结果
					</a>
					<a href="help.html">
						帮助
					</a>

				</div>
			</div>
		</div>

		<div class="container content-box">
			<div class="row">
				<div class="col-md-2 mycenter-left-nav">
					<ul class="list-group">
						<a href="#" class="list-group-item">
							个人基本信息
						</a>
						<a href="#" class="list-group-item">
							消息管理
						</a>
						<a href="upload.html" class="list-group-item active">
							文档上传
						</a>
						<a href="myDoc.html" class="list-group-item">
							我的文档
						</a>
						<a href="myFork.html" class="list-group-item">
							我的收藏
						</a>
						<a href="#" class="list-group-item">首页管理</a>
						<a href="#" class="list-group-item">用户管理</a>
					</ul>
				</div>
				<div class="col-md-10">
					<div class="panel panel-default">
						<div class="panel-heading">文档上传</div>
						<div class="panel-body">
							<div class="alert alert-info" role="alert">
								<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><i class="glyphicon glyphicon-info-sign"></i> 上传文档</div>
							<div id="uploader" class="wu-example form-horizontal">
								<!--<label for="inputDocName" class="col-sm-2 control-label"></label>-->
								<div id="thelist" class="uploader-list"></div>
								<div class="btns">
									<div id="picker">选择文件</div>
									<button id="ctlBtn" class="btn btn-default">开始上传</button>
								</div>
							</div>
							<div class="alert alert-info" role="alert">
								<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<i class="glyphicon glyphicon-info-sign"></i> 填写文档基本信息
							</div>
							<form class="form-horizontal" id="doc-upload-form">
								<div class="form-group">
									<label for="inputDocName" class="col-sm-2 control-label">名称</label>
									<div class="col-sm-8">
										<input type="text" class="form-control" id="inputDocName" placeholder="请输入文档名称">
									</div>
									<div class="col-sm-2 input-warning">
										请填写文档名称
									</div>
								</div>
								<div class="form-group">
									<label for="inputDocName" class="col-sm-2 control-label">类型</label>
									<div class="col-sm-4">
										<select class="form-control">
											<option>技术类</option>
											<option>2</option>
											<option>3</option>
											<option>4</option>
											<option>5</option>
										</select>
									</div>
									<div class="col-sm-4">
										<select class="form-control">
											<option>Java</option>
											<option>C</option>
											<option>C#</option>
											<option>Python</option>
											<option>NodeJs</option>
										</select>
									</div>
									<div class="col-sm-2">
										请选择类型
									</div>
								</div>
								<div class="form-group">
									<label for="inputDocName" class="col-sm-2 control-label">权限</label>
									<div class="col-sm-8">
										<select class="form-control">
											<option>公开</option>
											<option>内部</option>
											<option>仅自己</option>
										</select>
									</div>
									<div class="col-sm-2">
										请选择文档查看权限
									</div>
								</div>

								<div class="form-group">
									<label for="inputDocName" class="col-sm-2 control-label">文档说明</label>
									<div class="col-sm-8">
										<textarea class="form-control" id="doc-desc" rows="3" placeholder="请对文档进行简要的说明，不少于10字"></textarea>
									</div>
									<div class="col-sm-2">
										请输入文档说明
									</div>
								</div>

								<div class="form-group">
									<div class="col-sm-offset-2 col-sm-10">
										<button type="submit" class="btn btn-default">提交</button>
									</div>
								</div>
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="bottom-box">
			<p>@企业文档管理系统 </p>
		</div>

	</body>
	<script>
		var $ = jQuery,
			$list = $('#thelist'),
			$btn = $('#ctlBtn'),
			state = 'pending',
			uploader;
		uploader = WebUploader.create({
			// 不压缩image
			resize: false,
			// swf文件路径
			swf: '/webuploader/Uploader.swf',
			// 文件接收服务端。
			server: 'test',
			// 选择文件的按钮。可选。
			// 内部根据当前运行是创建，可能是input元素，也可能是flash.
			pick: '#picker'
		});
		// 当有文件添加进来的时候
		uploader.on('fileQueued', function(file) {
			$list.append('<div id="' + file.id + '" class="item">' +
				'<h4 class="info">' + file.name + '</h4>' +
				'<p class="state">等待上传...</p>' +
				'</div>');
		});
		// 文件上传过程中创建进度条实时显示。
		uploader.on('uploadProgress', function(file, percentage) {
			var $li = $('#' + file.id),
				$percent = $li.find('.progress .progress-bar');
			// 避免重复创建
			if (!$percent.length) {
				$percent = $('<div class="progress progress-striped active">' +
					'<div class="progress-bar" role="progressbar" style="width: 0%">' +
					'</div>' +
					'</div>').appendTo($li).find('.progress-bar');
			}
			$li.find('p.state').text('上传中');
			$percent.css('width', percentage * 100 + '%');
		});
		uploader.on('uploadSuccess', function(file) {
			$('#' + file.id).find('p.state').text('已上传');
		});
		uploader.on('uploadError', function(file) {
			$('#' + file.id).find('p.state').text('上传出错');
		});
		uploader.on('uploadComplete', function(file) {
			$('#' + file.id).find('.progress').fadeOut();
		});
		uploader.on('all', function(type) {
			if (type === 'startUpload') {
				state = 'uploading';
			} else if (type === 'stopUpload') {
				state = 'paused';
			} else if (type === 'uploadFinished') {
				state = 'done';
			}
			if (state === 'uploading') {
				$btn.text('暂停上传');
			} else {
				$btn.text('开始上传');
			}
		});
		$btn.on('click', function() {
			if (state === 'uploading') {
				uploader.stop();
			} else {
				uploader.upload();
			}
		});
		$("#doc-upload-form").submit(function() {
			if ($("#inputDocName").val() == "") {
				$("#inputDocName").parent().parent().addClass("has-error");
			} else {
				$("#inputDocName").parent().parent().removeClass("has-error")
			}
			if ($("#doc-desc").val() == "") {
				$("#doc-desc").parent().parent().addClass("has-error");
			} else {
				$("#doc-desc").parent().parent().removeClass("has-error")
			}
			if ($(this).find(".has-error").length > 0) {
				alert($(this).find(".has-error").length);
				return false;
			} else {
				alert("检验通过！")
				return false;
			}
		});
	</script>

</html>